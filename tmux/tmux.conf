# tmux.conf by @windvalley
# https://raw.githubusercontent.com/windvalley/dotfiles/master/tmux/tmux.conf


# vim: set foldmarker={{,}} foldlevel=0 foldmethod=marker:
#
# NOTE:
#   1. æŸ¥çœ‹æŠ˜å å†…å®¹çš„æ–¹æ³•:
#      za: normal æ¨¡å¼ä¸‹æŒ‰ za, è¡¨ç¤ºå½“å…‰æ ‡åœ¨å…³é—­æŠ˜å ä¸Šæ—¶æ‰“å¼€ä¹‹, åœ¨æ‰“å¼€æŠ˜å ä¸Šæ—¶å…³é—­ä¹‹;
#          åœ¨æ‰“å¼€çš„æŠ˜å å†…éƒ¨ä»»æ„å¤„æŒ‰ za, ä¹Ÿä¼šå…³é—­æŠ˜å .
#      zA: æ˜¯ za çš„é€’å½’æ“ä½œ, æ˜¯é’ˆå¯¹åµŒå¥—æŠ˜å çš„åœºæ™¯.
#
#   2. ä¸‹é¢æ³¨é‡Šä¸­çš„æ‰€æœ‰å¿«æ·é”®, éƒ½æ˜¯å¿…é¡»å…ˆæŒ‰ ctrl a æ¾æ‰‹åå†éœ€è¦æŒ‰çš„.


# --- å®‰è£…æ­¥éª¤ {{

# ä»¥ MacOS ä¸¾ä¾‹:
#   1) brew install tmux
#   2) wget -O ~/.tmux.conf https://raw.githubusercontent.com/windvalley/dotfiles/master/tmux/tmux.conf
#   3) git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
#   4) è¿›å…¥ tmux ç»ˆç«¯ç¯å¢ƒå, å…ˆæŒ‰ ctrl a, æ¾æ‰‹åå†æŒ‰ I æ¥å®‰è£…æ‰€æœ‰é…ç½®çš„æ’ä»¶.

# }}


# --- åŸºç¡€é…ç½® {{

# å°†ç³»ç»Ÿç¯å¢ƒå˜é‡ $PATH çš„å€¼æ·»åŠ åˆ°è¿™é‡Œ,
# è§£å†³ '~/.tmux/plugins/tpm/tpm returned 1' ç­‰æ‰¾ä¸åˆ°ç›¸å…³å‘½ä»¤çš„é—®é¢˜.
# doc: https://github.com/tmux-plugins/tpm/blob/master/docs/tpm_not_working.md
set-environment -g PATH "/usr/local/opt/node@14/bin:\
/Users/xg/.luarocks/bin:\
/Users/xg/.poetry/bin:\
/usr/local/opt/python3/bin:\
/Users/xg/go/bin:\
/usr/local/bin:\
/usr/bin:\
/bin:\
/usr/sbin:\
/sbin:\
/Library/Apple/usr/bin:\
/Applications/Wireshark.app/Contents/MacOS"

# r  source åŠ è½½é…ç½®æ–‡ä»¶ ~/.tmux.conf, ä½¿ç«‹å³ç”Ÿæ•ˆ.
bind r source-file ~/.tmux.conf \; display '~/.tmux.conf sourced'

# e  æ–°åˆ›å»ºä¸€ä¸ª tmux çª—å£æ¥æ‰“å¼€ ~/.tmux.conf, ä¿å­˜åä¼šè‡ªåŠ¨å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œ source.
bind e new-window -n "~/.tmux.conf" "\${EDITOR:-vim} ~/.tmux.conf &&
    tmux source ~/.tmux.conf && tmux display \"~/.tmux.conf sourced\""

# æ·»åŠ æ–°çš„ prefix é”®: ctrl a, é»˜è®¤çš„ ctrl b ä¸å–æ¶ˆ, ä¸æ¨è.
#set -g prefix2 C-a
#bind C-a send-prefix -2

# é‡ç½® prefix é”®ä¸º: ctrl a, å–æ¶ˆé»˜è®¤çš„ ctrl b é”®.
# ç”±äº ctrl b æ˜¯å‘½ä»¤è¡Œæ“ä½œéå¸¸é¢‘ç¹ä½¿ç”¨çš„å…‰æ ‡å·¦ç§»å¿«æ·é”®,
# ä¸ºäº†æ’é™¤å¹²æ‰°, æ‰€ä»¥å–æ¶ˆæ‰é»˜è®¤çš„ prefix æ˜ å°„;
# è™½ç„¶ ctrl a ä¹Ÿæ˜¯å‘½ä»¤è¡Œæ“ä½œè¾ƒå¸¸ç”¨çš„å¿«æ·é”®, ç”¨äºå…‰æ ‡è·³è½¬åˆ°å‘½ä»¤è¡Œèµ·å§‹ä½ç½®,
# ä½†æŒ‰é”®ä¸æ˜¯å¾ˆé¢‘ç¹, æˆ‘ä»¬åªéœ€è¿ç»­æŒ‰2æ¬¡ ctrl a å³å¯å®ç°è·³è½¬, å½±å“ä¸å¤§.
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# æ–°å»ºçª—å£æ—¶ä½¿ç”¨çš„é»˜è®¤ç»ˆç«¯.
# NOTE: å¦‚æœè®¾ç½®æˆ screen-256color,
# ä¼šé€ æˆé€šè¿‡ ssh è¿æ¥åˆ°è¿œç¨‹ centos5.x ç³»ç»Ÿä¸Šæ—¶, æ— æ³•ä½¿ç”¨ clear å‘½ä»¤.
set -g default-terminal xterm-256color

# å¦‚ä¸‹ 2 æ¡é…ç½®ç”¨æ¥è§£å†³ vim é…ç½® set termguicolors æ—¶, åœ¨ tmux ä¸‹ä½¿ç”¨ vim æ²¡æœ‰é¢„æœŸæ•ˆæœçš„é—®é¢˜.
set -g terminal-overrides ',xterm-256color:Tc'
set -as terminal-overrides ',xterm*:sitm=\E[3m'

# æŒ‰å®Œ prefix é”®, å†æŒ‰ esc é”®, å¤šå°‘æ¯«ç§’åå–æ¶ˆ prefix,
# å¦‚æœæœ‰è®¡åˆ’æŠŠ esc é”®ä¹Ÿä½œä¸ºåŠŸèƒ½é”®çš„ä¸€éƒ¨åˆ†æ—¶, æŠŠè¿™ä¸ªæ—¶é—´è®¾ç½®çš„é•¿ä¸€äº›æ‰æœ‰æ„ä¹‰,
# å¦åˆ™ç›´æ¥è®¾ç½®ä¸º 0 å³å¯.
set -sg escape-time 0

# æŒ‰å®Œ prefix é”®å’ŒåŠŸèƒ½é”®å, å¯åªæŒ‰åŠŸèƒ½é”®æ¥å®æ–½ç›¸åŒçš„åŠŸèƒ½,
# æŒ‰é”®é—´éš”æ—¶é—´è¶…è¿‡è¿™é‡Œè®¾ç½®çš„æ—¶é—´åå°±éœ€è¦é‡æ–°è¾“å…¥ prefix é”®äº†.
# æ¯”è¾ƒé€‚ç”¨äº resize çª—æ ¼çš„å¿«æ·é”®, çœå»äº†é¢‘ç¹æŒ‰ prefix é”®çš„éº»çƒ¦.
set -sg repeat-time 500

# ä¸€ä¸ªçª—å£æœ€å¤šä¿ç•™å¤šå°‘æ¡å†å²è®°å½•.
set -g history-limit 50000

# æ”¯æŒä½¿ç”¨é¼ æ ‡åˆ‡æ¢çª—å£, è°ƒæ•´çª—æ ¼å¤§å°ç­‰.
set -g mouse on

# çª—å£å’Œçª—æ ¼ç¼–å·ä» 1 å¼€å§‹, é»˜è®¤æ˜¯ä» 0 å¼€å§‹.
set -g base-index 1
setw -g pane-base-index 1

# çª—å£è‡ªåŠ¨é‡å‘½å.
setw -g automatic-rename on

# å¦‚æœæœ‰çª—å£å…³é—­, å¯¹ç°æœ‰çª—å£è¿›è¡Œé‡æ–°ç¼–å·.
set -g renumber-windows on

# ç»ˆç«¯æ ‡ç­¾é¡µè®¾ç½®æ ‡é¢˜.
set -g set-titles on

# çª—æ ¼ä¿¡æ¯çš„å±•ç¤ºæ—¶é—´, æ¯”å¦‚ q å‘½ä»¤å±•ç¤ºçª—æ ¼ç¼–å·çš„æ˜¾ç¤ºæ—¶é•¿, å•ä½æ¯«ç§’.
set -g display-panes-time 1000

# è®¾ç½®çŠ¶æ€æ æ¶ˆæ¯å±•ç¤ºçš„æ—¶é—´, å•ä½æ¯«ç§’.
set -g display-time 600

# ç›‘æ§çª—å£æ´»åŠ¨, æ´»åŠ¨çš„çª—å£åœ¨çŠ¶æ€æ é«˜äº®æ˜¾ç¤º.
set -g monitor-activity on

# çª—å£æ´»åŠ¨ä¿¡æ¯ä½¿ç”¨åœ¨çŠ¶æ€æ æ˜¾ç¤ºä¿¡æ¯çš„æ–¹å¼æ›¿ä»£å“é“ƒçš„æ–¹å¼.
set -g visual-activity on

# }}


# --- çª—å£çª—æ ¼æ“ä½œæŒ‰é”®æ˜ å°„ {{

# ctrl c  åˆ›å»ºæ–°çš„ session.
bind C-c new-session

# ctrl f  æœç´¢ session.
bind C-f command-prompt -p find-session 'switch-client -t %%'

# k/j/h/l  å…‰æ ‡å‘ä¸Š/ä¸‹/å·¦/å³è¾¹çš„çª—æ ¼è·³è½¬.
bind -r k select-pane -U
bind -r j select-pane -D
bind -r h select-pane -L
bind -r l select-pane -R

# >/<  å’Œä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ªçª—æ ¼äº¤æ¢ä½ç½®.
bind > swap-pane -D
bind < swap-pane -U

# H/J/K/L  å‘å·¦/ä¸‹/ä¸Š/å³ resize çª—æ ¼.
bind -r H resize-pane -L 2
bind -r J resize-pane -D 2
bind -r K resize-pane -U 2
bind -r L resize-pane -R 2

# ctrl l  æ¸…ç©ºçª—æ ¼å±å¹•çš„åŒæ—¶, çª—æ ¼çš„å†å²è®°å½•ä¹Ÿè¢«æ¸…é™¤.
# NOTE: æ³¨æ„å’Œä¸åŠ  prefix çš„ ctrl l çš„åŒºåˆ«, ä¸åŠ  prefix çš„ ctrl l åªæ¸…ç©ºå½“å‰çª—æ ¼çš„å±å¹•,
#       çª—æ ¼çš„å†å²å†…å®¹è®°å½•è¿˜æ˜¯ä¿ç•™çš„, å¯ä»¥é€šè¿‡è¿›å…¥ copy æ¨¡å¼åè¿›è¡Œæµè§ˆ.
bind C-l send-keys C-l \; run 'sleep 0.1' \; clear-history

# }}


# --- Copy æ¨¡å¼å’Œ Sync æ¨¡å¼é…ç½® {{

# copy æ¨¡å¼ä¸‹, ä½¿ç”¨ vi æˆ– emacs çš„é”®ä½ç»‘å®š, é»˜è®¤å€¼: emacs
# NOTE: é€šè¿‡ [ è¿›å…¥åˆ° copy æ¨¡å¼, æŒ‰ q å¯é€€å‡º copy æ¨¡å¼.
set -g status-keys vi
setw -g mode-keys vi

# copy æ¨¡å¼ä¸‹, ä½¿ç”¨ v è¿›è¡Œæ–‡æœ¬é€‰æ‹©, ä½¿ç”¨ V å¯è¿›è¡ŒæŒ‰è¡Œé€‰æ‹©.
bind -T copy-mode-vi v send-keys -X begin-selection

# copy æ¨¡å¼ä¸‹, ä½¿ç”¨ ctrl v è¿›è¡ŒçŸ©å½¢é€‰æ‹©, æŒ‰å®Œ ctrl v å, éœ€è¦å†æŒ‰ v è¿›è¡Œé€‰æ‹©.
bind -T copy-mode-vi C-v send -X rectangle-toggle

# copy æ¨¡å¼ä¸‹, ä½¿ç”¨ y å°†é€‰æ‹©çš„æ–‡æœ¬æ‹·è´åˆ°ç³»ç»Ÿå‰ªè´´æ¿;
# å¦‚æœå®‰è£…äº† tmux-plugins/tmux-yank æ’ä»¶, è¿™æ¡å¯ä»¥ä¸é…ç½®.
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# ctrl y  æ‰“å¼€/å…³é—­ sync æ¨¡å¼, è¿›å…¥ sync æ¨¡å¼å, å¦‚æœä¸€ä¸ªçª—å£æœ‰å¤šä¸ªçª—æ ¼,
#         åœ¨å…¶ä¸­ä¸€ä¸ªçª—æ ¼æ‰§è¡Œå‘½ä»¤, å…¶ä»–çª—æ ¼åŒæ—¶ä¼šæ‰§è¡Œè¯¥å‘½ä»¤, è¢« t æ—¶é—´è¦†ç›–çš„çª—æ ¼é™¤å¤–.
# NOTE: ä¸è¦ä½¿ç”¨ bind -n C-y è¿™ç§æ–¹å¼, åŠ  -n è¡¨ç¤ºä¸éœ€è¦ prefix å‰ç¼€,
# ä¼šå¯¼è‡´ vim çš„ ctrl y å¿«æ·é”®æ— æ³•ä½¿ç”¨.
bind C-y setw synchronize-panes

# }}


# --- ä¸»é¢˜é¢œè‰²é…ç½® {{

# çª—å£åç§°çš„é¢œè‰²è®¾ç½®, åœ¨çŠ¶æ€æ æ˜¾ç¤º.
setw -g window-status-style fg=colour244,bg=default,dim

# å½“å‰æ´»åŠ¨çª—å£åç§°çš„é¢œè‰²è®¾ç½®.
setw -g window-status-current-style fg=colour166,bg=default,bright

# çª—æ ¼è¾¹æ¡†é¢œè‰².
set -g pane-border-style fg=colour244

# å½“å‰æ´»åŠ¨çª—æ ¼è¾¹æ¡†é¢œè‰².
set -g pane-active-border-style fg=blue

# çª—æ ¼åºå·çš„é¢œè‰²è®¾ç½®.
set -g display-panes-colour colour33

# æ´»åŠ¨çª—æ ¼åºå·çš„é¢œè‰²è®¾ç½®.
set -g display-panes-active-colour colour166

# æ¶ˆæ¯çš„é¢œè‰²è®¾ç½®.
set -g message-style bg=colour235,fg=colour166

# t æ—¶é’Ÿçš„é¢œè‰²è®¾ç½®.
setw -g clock-mode-colour green

# æ–°å»º session æ—¶, æ˜¯å¦é»˜è®¤å¼€å¯çŠ¶æ€æ , é»˜è®¤å€¼: on, å¯é€‰å€¼: off
set -g status on

# çŠ¶æ€æ ä¿¡æ¯æ›´æ–°é—´éš”å‡ ç§’é’Ÿ.
set -g status-interval 1

# çŠ¶æ€æ çš„ä½ç½®, é»˜è®¤å€¼: bottom, å¯é€‰å€¼: top
set -g status-position top

# çŠ¶æ€æ ä¿¡æ¯ä½ç½®è°ƒæ•´, é»˜è®¤å€¼: left, å¯é€‰å€¼: centre, right
set -g status-justify left

# çŠ¶æ€æ é¢œè‰²è®¾ç½®.
set -g status-style bg=colour235,fg=colour136,default

# çŠ¶æ€æ å·¦è¾¹ä¿¡æ¯çš„æ˜¾ç¤ºé•¿åº¦.
set -g status-left-length 40

# çŠ¶æ€æ å³è¾¹ä¿¡æ¯çš„æ˜¾ç¤ºé•¿åº¦.
set -g status-right-length 140

# çŠ¶æ€æ å·¦è¾¹æ˜¾ç¤ºçš„ä¿¡æ¯å®šåˆ¶.
set -g status-left "#[fg=#CE0000,bold] â™¥ï¸ #S "

# çŠ¶æ€æ å³è¾¹æ˜¾ç¤ºçš„ä¿¡æ¯å®šåˆ¶.
set -g status-right "#{prefix_highlight} \
#[fg=orange,bold]#{iptmthd} \
ğŸ€#[fg=#ff5f87,bold]#{current_colorscheme} \
ğŸ‘‘#[fg=#ff875f]#{current_font} #[fg=#ff8787]#{current_font_size} \
ğŸ„#[fg=#009100,bold]Google: #{online_status} \
â³#[fg=cyan,bold]SaveInterval: #{continuum_status} \
ğŸ’»#[fg=#8787af]#{cpu_percentage} âš¡#{ram_percentage} \
ğŸ”¥#[fg=#8787af]#{cpu_temp} âš¡#{fan_speed} \
ğŸ”‹#[fg=#009100,bold]#{battrey_percentage} \
#[fg=#ff5f87]#{weather} \
#[fg=#009393]âŒšï¸%a %Y-%m-%d %H:%M:%S"

# b  æ˜¾ç¤ºæˆ–éšè—çŠ¶æ€æ .
bind b set status

# v  éšæœºæ›´æ¢ Vim/Neovim å’Œ Alacritty çš„ colorscheme.
bind v run '~/.dotfiles/scripts/random_colorscheme_for_vim_alacritty.sh'

# f  éšæœºæ›´æ¢ Alacritty çš„å­—ä½“.
bind f run '~/.dotfiles/scripts/random_font_for_alacritty.sh'

# o  åœ¨é€æ˜å’Œä¸é€æ˜ä¹‹é—´åˆ‡æ¢ Alacritty çš„èƒŒæ™¯.
bind o run '~/.dotfiles/scripts/toggle_transparency_for_alacritty.sh'

# ctrl k  å¢åŠ  Alacritty çš„é€æ˜åº¦.
bind C-k run '~/.dotfiles/scripts/decrease_opacity_of_alacritty.sh'

# ctrl j  é™ä½ Alacritty çš„é€æ˜åº¦.
bind C-j run '~/.dotfiles/scripts/increase_opacity_of_alacritty.sh'

# }}


# --- æ’ä»¶ç®¡ç†ä¸é…ç½® {{

# *** å®‰è£…æ’ä»¶ç®¡ç†å·¥å…·:
#   git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
#
# *** åŸºæœ¬ä½¿ç”¨æ–¹æ³•:
#             I  å®‰è£…æ–°æ·»åŠ çš„æ’ä»¶.
#             U  æ›´æ–°æ’ä»¶.
#             u  å¸è½½ä¸åœ¨é…ç½®æ–‡ä»¶ä¸­çš„æ’ä»¶.

# *** TMUX plugin manager Begin
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @tpm-clean 'u'  # é‡æ–°ç»‘å®šå¸è½½æ’ä»¶çš„å¿«æ·é”®.
# ==============================


# åœ¨çŠ¶æ€æ æ˜¾ç¤ºç”µé‡ç™¾åˆ†æ¯”.
set -g @plugin 'tmux-plugins/tmux-battery'

# åœ¨çŠ¶æ€æ æ˜¾ç¤º CPU å’Œå†…å­˜åˆ©ç”¨ç‡, CPU æ¸©åº¦, é£æ‰‡è½¬é€Ÿç­‰ä¿¡æ¯.
# #{cpu_percentage} #{ram_percentage} #{cpu_temp} #{fan_speed}
set -g @plugin 'windvalley/tmux-cpu'

# æŒ‰ prefix æˆ– prefix + [ æˆ– prefix + ctrl y ç­‰æŒ‰é”®çš„æ—¶å€™, åœ¨çŠ¶æ€æ é«˜äº®æ˜¾ç¤º.
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @prefix_highlight_fg 'white'
set -g @prefix_highlight_bg 'blue'
set -g @prefix_highlight_show_copy_mode 'on'
set -g @prefix_highlight_copy_mode_attr 'fg=black,bg=yellow,bold'
set -g @prefix_highlight_show_sync_mode 'on'
set -g @prefix_highlight_sync_mode_attr 'fg=black,bg=green'
# ctrl a  æŒ‰ prefix æ—¶, ç”±æ˜¾ç¤º ^B æ”¹ä¸ºæ˜¾ç¤º Wait, è¡¨ç¤ºç­‰å¾…è¾“å…¥å‘½ä»¤.
set -g @prefix_highlight_prefix_prompt 'Wait'
# [  è¿›å…¥ copy æ¨¡å¼æ—¶, æ˜¾ç¤º Copy.
set -g @prefix_highlight_copy_prompt 'Copy'
# ctrl y  è¿›å…¥çª—æ ¼åŒæ­¥æ¨¡å¼æ—¶, æ˜¾ç¤º Sync.
set -g @prefix_highlight_sync_prompt 'Sync'

# åœ¨çŠ¶æ€æ æ˜¾ç¤ºç½‘ç»œæ˜¯å¦åœ¨çº¿, é»˜è®¤æ˜¯é€šè¿‡ curl www.google.com æ¥æ£€æµ‹ç½‘ç»œè¿é€šæ€§çš„,
# å¯ä¿®æ”¹ ~/.tmux/plugins/tmux-online-status/scripts/online_status_icon.sh æ›´æ”¹æ£€æµ‹æ–¹å¼.
set -g @plugin 'windvalley/tmux-online-status'
set -g @online_icon "ok"
set -g @offline_icon "off"

# ctrl s  ä¿å­˜å½“å‰ session.
# ctrl r  ç”±äºæœåŠ¡å™¨é‡å¯æˆ– tmux kill-server ç­‰åŸå› å¯¼è‡´ä¸¢å¤± session å,
#         å¯ä»¥ä½¿ç”¨æ­¤å‘½ä»¤æ¢å¤ session.
#
# NOTE: ä¸æƒ³æ¢å¤æœ€è¿‘ä¸€æ¬¡çš„ä¿å­˜, æƒ³æ¢å¤åˆ°å†å²çš„æŸä¸ªä¿å­˜çš„æ–¹æ³•:
#       1) cd ~/.tmux/resurrect/
#       2) ln -sf <file_name> last
#       3) prefix + Ctrl r
set -g @plugin 'tmux-plugins/tmux-resurrect'
# æœ‰äº†è¿™ä¸ªæ’ä»¶å, æˆ‘ä»¬å°±å¯ä»¥ä¸ç”¨æ‰‹åŠ¨ä¿å­˜å’Œæ¢å¤ä¸¢å¤±çš„ session äº†, å…¨éƒ¨ç”±æ­¤æ’ä»¶ä»£åŠ³.
set -g @plugin 'tmux-plugins/tmux-continuum'
# æ¯å‡ åˆ†é’Ÿè‡ªåŠ¨ä¿å­˜ä¸€æ¬¡ session, è®¾ç½®ä¸º 0 è¡¨ç¤ºç¦æ­¢è‡ªåŠ¨ä¿å­˜åŠŸèƒ½, é»˜è®¤å€¼: 15
set -g @continuum-save-interval '5'
# ä¸¢å¤± session å, å†æ¬¡æ‰§è¡Œ tmux æ—¶æ˜¯å¦è¿›è¡Œè‡ªåŠ¨æ¢å¤ session.
set -g @continuum-restore 'on'
# ä¿å­˜å¹¶æ¢å¤ vim/nvim æ‰“å¼€çš„çŠ¶æ€.
set -g @resurrect-strategy-vim 'session'
set -g @resurrect-strategy-nvim 'session'
# å¦‚æœä½¿ç”¨çš„æ˜¯ macvim(macOS), éœ€è¦ä½¿ç”¨ä¸‹é¢è¿™æ¡é…ç½®æ¥æ¢å¤ vim æ‰“å¼€çŠ¶æ€.
set -g @resurrect-processes '~Vim -> vim'
# ä¿å­˜å¹¶æ¢å¤çª—æ ¼çš„å†…å®¹.
set -g @resurrect-capture-pane-contents 'on'

# ä½¿å¾—å¯ä»¥æœç´¢å’Œå¤åˆ¶å‘½ä»¤è¡Œå±å¹•ä¸Šçš„æ–‡æœ¬, è„±ç¦»ç¹ççš„é¼ æ ‡æ“ä½œ.
# ctrl f  è¿›å…¥ copy æ¨¡å¼, å…‰æ ‡è·³è½¬åˆ°å‘½ä»¤è¡Œä¸Šæ–¹çš„æ–‡ä»¶åç§°å¹¶é«˜äº®æ˜¾ç¤ºé€‰ä¸­æ–‡ä»¶å.
# ctrl g  è¿›å…¥ copy æ¨¡å¼, ç”¨äº git status -sb å‘½ä»¤å, é€‰ä¸­åˆ—å‡ºçš„ä¸€ä¸ªæ–‡ä»¶åç§°å¹¶é«˜äº®æ˜¾ç¤º.
# ctrl u  è¿›å…¥ copy æ¨¡å¼, å…‰æ ‡è·³è½¬åˆ°å‘½ä»¤è¡Œä¸Šæ–¹çš„ url é“¾æ¥å¹¶é«˜äº®æ˜¾ç¤º.
# ctrl d  è¿›å…¥ copy æ¨¡å¼, å…‰æ ‡è·³è½¬åˆ°å‘½ä»¤è¡Œä¸Šæ–¹çš„æ•°å­—å¹¶é«˜äº®æ˜¾ç¤º.
#      /  è¿›å…¥å­—ç¬¦ä¸²æˆ–æ­£åˆ™æœç´¢æ¨¡å¼, æœç´¢å‘½ä»¤è¡Œä¸Šæ–¹çš„æ–‡æœ¬å¹¶é«˜äº®æ˜¾ç¤º.
#    n/N  å‘ä¸Š/å‘ä¸‹æœç´¢æ–‡æœ¬.
#  enter  å¤åˆ¶é€‰ä¸­çš„æ–‡æœ¬.
#
# NOTE: ä¸ºäº†ä½¿ / æœç´¢å‘½ä»¤å¥½ç”¨, ç³»ç»Ÿä¸Šéœ€è¦å®‰è£… grep å’Œ gawk: brew install grep gawk
set -g @plugin 'tmux-plugins/tmux-copycat'
# ctrl h  è¿›å…¥ copy æ¨¡å¼, é€‰ä¸­å‘½ä»¤è¡Œä¸Šæ–¹çš„ hash åœ°å€, æ¯”å¦‚åœ¨æ‰§è¡Œå®Œ git log å‘½ä»¤åä½¿ç”¨.
set -g @copycat_hash_search 'C-h'
# ctrl i  è¿›å…¥ copy æ¨¡å¼, é€‰ä¸­å‘½ä»¤è¡Œä¸Šæ–¹çš„ IP åœ°å€, å¹¶é«˜äº®æ˜¾ç¤º.
set -g @copycat_ip_search 'C-i'
# D  é«˜äº®é€‰ä¸­æ¯è¡Œå¼€å¤´çš„æ•°å­—å­—ç¬¦ä¸², ä¸€èˆ¬ç”¨äº pgrep -lf processname å‘½ä»¤å, ç”¨æ¥å¿«é€Ÿé€‰æ‹© PID.
set -g @copycat_search_D '^[[:digit:]]+'
# S  é«˜äº®é€‰ä¸­ "" åŒ…è£¹çš„å­—ç¬¦ä¸², åŒ…æ‹¬ "" æœ¬èº«.
set -g @copycat_search_S '".*?"'

# å‘½ä»¤è¡Œæ–‡æœ¬å¤åˆ¶æ’ä»¶.
# y  normal æ¨¡å¼ä¸‹, å°†å‘½ä»¤è¡Œæ–‡æœ¬å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿;
#    copy æ¨¡å¼ä¸‹, å°†é€šè¿‡ n/N é€‰æ‹©çš„é«˜äº®æ–‡æœ¬æ‹·è´åˆ°ç³»ç»Ÿå‰ªè´´æ¿.
# Y  normal æ¨¡å¼ä¸‹, å°†çª—æ ¼çš„å½“å‰å·¥ä½œç›®å½•æ–‡æœ¬æ‹·è´åˆ°ç³»ç»Ÿå‰ªè´´æ¿;
#    copy æ¨¡å¼ä¸‹, å°†é€šè¿‡ n/N é€‰æ‹©çš„é«˜äº®æ–‡æœ¬ç›´æ¥å¤åˆ¶å¹¶ç²˜è´´åˆ°å‘½ä»¤è¡Œ.
set -g @plugin 'tmux-plugins/tmux-yank'

# copy æ¨¡å¼ä¸‹, ç›´æ¥æ‰“å¼€é€‰ä¸­çš„æ–‡ä»¶æˆ–url, æˆ–ä½¿ç”¨æœç´¢å¼•æ“æœç´¢é€‰ä¸­çš„æ–‡æœ¬.
# o  ç›´æ¥ä½¿ç”¨ç›¸åº”çš„é»˜è®¤åº”ç”¨æ‰“å¼€é€‰ä¸­çš„æ–‡ä»¶æˆ–url.
# S  ä½¿ç”¨ google æœç´¢é€‰ä¸­çš„å­—ç¬¦ä¸², æ³¨æ„å¯ä½¿ç”¨ l æ‰©å±•é€‰ä¸­çš„å­—ç¬¦ä¸².
# B  ä½¿ç”¨ bing æœç´¢é€‰ä¸­çš„å­—ç¬¦ä¸².
set -g @plugin 'tmux-plugins/tmux-open'
set -g @open-B 'https://www.bing.com/search?q='
set -g @open-S 'https://www.google.com/search?q='

# #{iptmthd} çŠ¶æ€æ æ˜¾ç¤ºå½“å‰çš„è¾“å…¥æ³•.
# NOTE: ä»…æ”¯æŒ MacOS,
# å¯ä¿®æ”¹ ~/.tmux/plugins/tmux-inputmethod/scripts/check_inputmethod.sh æ”¹å˜æ˜¾ç¤ºæ ·å¼.
set -g @plugin 'ki-chi/tmux-inputmethod'

# #{weather} åœ¨çŠ¶æ€æ æ˜¾ç¤ºå½“å‰çš„å¤©æ°”ä¿¡æ¯.
set -g @plugin 'xamut/tmux-weather'
# å¤©æ°”ä¿¡æ¯æ›´æ–°é—´éš”, å•ä½åˆ†é’Ÿ, é»˜è®¤å€¼: 15
set-option -g @tmux-weather-interval 10
# æŸ¥çœ‹å“ªä¸ªåŸå¸‚çš„å¤©æ°”, å¦‚æœä¸è®¾ç½®åˆ™ä¼šæ ¹æ® IP åœ°å€åˆ¤æ–­åŸå¸‚, ä½†å¯èƒ½ä¼šå‡ºç° not found é”™è¯¯.
set-option -g @tmux-weather-location "Beijing"
# è®¾ç½®å¤©æ°”ä¿¡æ¯æ˜¾ç¤ºæ ¼å¼.
# doc: https://github.com/chubin/wttr.in#one-line-output
set-option -g @tmux-weather-format "+%c+%t+%w+%m"

# #{current_colorscheme} çŠ¶æ€æ æ˜¾ç¤º Alacritty å½“å‰çš„ colorscheme.
# #{current_font} çŠ¶æ€æ æ˜¾ç¤º Alacritty å½“å‰çš„ font.
set -g @plugin 'windvalley/tmux-show-colorscheme#main'


# *** TMUX plugin manager End
#
# è‡ªåŠ¨å®‰è£… tpm, å¹¶è‡ªåŠ¨å®‰è£…å…¶æ‰€ç®¡ç†çš„ tmux æ’ä»¶.
if "test ! -d ~/.tmux/plugins/tpm" \
    "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && \
    tmux source ~/.tmux.conf && \
    ~/.tmux/plugins/tpm/bin/install_plugins && \
    tmux source ~/.tmux.conf'"

run '~/.tmux/plugins/tpm/tpm'
# ==============================

# }}


# --- ä½¿ç”¨æŠ€å·§ {{

#        ctrl a  prefix æŒ‰é”®, ä»¥ä¸‹æ‰€æœ‰æŒ‰é”®å¦‚æœæ²¡æœ‰ç‰¹æ®Šè¯´æ˜, éƒ½å¿…é¡»å…ˆæŒ‰ prefix,
#                æ³¨æ„æŒ‰å®Œ prefix, éœ€è¦å…ˆæ¾å¼€æŒ‰é”®, å†æŒ‰å…¶ä»–çš„å…·ä½“å‘½ä»¤æŒ‰é”®.
#             e  ç¼–è¾‘ ~/.tmux.conf é…ç½®æ–‡ä»¶.
#             K  æŸ¥çœ‹ ~/.tmux.conf æ–‡ä»¶ä¸­å…‰æ ‡æ‰€åœ¨çš„å¯¹è±¡çš„å¸®åŠ©æ–‡æ¡£.
#             r  source ~/.tmux.conf, ä½¿ä¹‹ç«‹å³ç”Ÿæ•ˆ.
#             ?  æŸ¥çœ‹ tmux é”®ç»‘å®šçš„å¸®åŠ©ä¿¡æ¯.
#             d  é€€å‡º tmux å®¢æˆ·ç«¯.
#             =  æ‰“å¼€æ‹·è´å†å², é€‰æ‹©ä¸€æ¡, ç„¶åå›è½¦, å³å¯å°†é€‰æ‹©çš„å†…å®¹å†™å…¥å½“å‰æ‰“å¼€çš„æ–‡ä»¶.
#                NOTE: æ­¤æ‹·è´å†å²è®°å½•æ˜¯ copy æ¨¡å¼ä¸‹è¿›è¡Œå¤åˆ¶çš„å†…å®¹.
#             b  æ˜¾ç¤º/éšè—çŠ¶æ€æ .
#             v  æ‰§è¡Œ ~/.dotfiles/tmux/random_colorscheme_for_vim_alacritty.sh è„šæœ¬,
#                ç”¨æ¥éšæœºæ›´æ¢ Vim å’Œ Alacritty çš„ colorscheme.
#             f  æ‰§è¡Œ ~/.dotfiles/tmux/random_font_for_alacritty.sh è„šæœ¬,
#                ç”¨æ¥éšæœºæ›´æ¢ Alacritty çš„ font.
#             o  æ‰§è¡Œ ~/.dotfiles/tmux/toggle_transparency_for_alacritty.sh è„šæœ¬,
#                ç”¨æ¥åœ¨é€æ˜å’Œä¸é€æ˜ä¹‹é—´åˆ‡æ¢ Alacritty çš„èƒŒæ™¯.
#        ctrl k  æ‰§è¡Œ ~/.dotfiles/tmux/decrease_opacity_of_alacritty.sh è„šæœ¬,
#                ç”¨æ¥å¢åŠ  Alacritty çš„é€æ˜åº¦.
#        ctrl j  æ‰§è¡Œ ~/.dotfiles/tmux/increase_opacity_of_alacritty.sh è„šæœ¬,
#                ç”¨æ¥é™ä½ Alacritty çš„é€æ˜åº¦.
#
#   **** session ç®¡ç† ****
#             s  åˆ—å‡ºæ‰€æœ‰ session.
#        ctrl c  åˆ›å»ºæ–°çš„ session.
#             $  é‡å‘½åå½“å‰ session.
#
#   **** çª—å£ç®¡ç† ****
#             c  æ–°å»ºä¸€ä¸ªçª—å£.
#             ,  é‡å‘½åå½“å‰çª—å£.
#      esc && q  ä¸­æ­¢é‡å‘½åçª—å£, å…ˆæŒ‰ esc, å†æŒ‰ q å³å¯.
#           n/p  åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ªçª—å£.
#        number  åˆ‡æ¢åˆ°æŸä¸ªç¼–å·çš„çª—å£.
#             &  æ€æ‰å½“å‰çª—å£.
#             w  åˆ—å‡ºæ‰€æœ‰ session çš„æ‰€æœ‰çª—å£.
#             f  æœç´¢çª—å£.
#
#   **** çª—æ ¼ç®¡ç† ****
#             %  åˆ’åˆ†å·¦å³ä¸¤ä¸ªçª—æ ¼.
#             "  åˆ’åˆ†ä¸Šä¸‹ä¸¤ä¸ªçª—æ ¼.
#             x  å…³é—­å½“å‰çª—æ ¼.
#          exit  åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ exit ä¹Ÿå¯ä»¥é€€å‡ºå½“å‰çª—æ ¼, å¦‚æœå½“å‰çª—æ ¼æ˜¯çª—å£çš„æœ€åä¸€ä¸ªçª—æ ¼,
#                åˆ™çª—å£ä¹ŸåŒæ—¶å…³é—­. NOTE: ä¸éœ€è¦åŠ  prefix.
#             z  å…¨å±æ˜¾ç¤ºå½“å‰çª—æ ¼, æˆ–å…³é—­å…¨å±æ˜¾ç¤º.
#             q  æ˜¾ç¤ºæ‰€æœ‰çª—æ ¼ç¼–å·.
#             t  åœ¨å½“å‰çª—æ ¼æ˜¾ç¤ºæ—¶é’Ÿ, æˆ‘ä»¬å¯ä»¥ç•™ä¸€ä¸ªå°çª—æ ¼å®‰æ”¾æ—¶é’Ÿ, é†’ç›®çš„æé†’æˆ‘ä»¬æ—¶é—´.
#         space  åˆ‡æ¢çª—æ ¼å¸ƒå±€.
#          kjhl  å°†å…‰æ ‡è·³è½¬åˆ°ä¸Š/ä¸‹/å·¦/å³çª—æ ¼.
#             ;  å°†å…‰æ ‡è·³è½¬åˆ°ä¸Šä¸€æ¬¡å…‰æ ‡æ‰€åœ¨çš„çª—æ ¼.
#          KJHL  å‘ä¸Š/ä¸‹/å·¦/å³è°ƒæ•´çª—æ ¼å¤§å°.
#           >/<  å’Œä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ªçª—æ ¼äº¤æ¢ä½ç½®.
#        ctrl l  æ¸…ç©ºçª—æ ¼å±å¹•çš„åŒæ—¶, çª—æ ¼çš„å†å²è®°å½•ä¹Ÿè¢«æ¸…é™¤.
#                NOTE: æ³¨æ„å’Œä¸åŠ  prefix çš„ ctrl l çš„åŒºåˆ«,
#                ä¸åŠ  prefix çš„ ctrl l åªæ¸…ç©ºå½“å‰çª—æ ¼çš„å±å¹•,
#                çª—æ ¼çš„å†å²å†…å®¹è®°å½•è¿˜æ˜¯ä¿ç•™çš„, å¯ä»¥é€šè¿‡è¿›å…¥ copy æ¨¡å¼åè¿›è¡Œæµè§ˆ.
#
#   **** copy æ¨¡å¼ ****
#             [  è¿›å…¥åˆ° copy æ¨¡å¼.
#             ]  å°†æ‹·è´çš„æ–‡æœ¬è¿›è¡Œç²˜è´´.
#             q  é€€å‡º copy æ¨¡å¼.
#   NOTE: ä»¥ä¸‹å‘½ä»¤å‡ä¸éœ€è¦åŠ  prefix.
#          kjhl  å…‰æ ‡ä¸Šä¸‹å·¦å³ç§»åŠ¨.
#                è¿œä¸æ­¢è¿™äº›, å¾ˆå¤š vim ä¸‹çš„å‘½ä»¤éƒ½å¯ä»¥åœ¨ copy æ¨¡å¼ä¸‹ä½¿ç”¨.
#             v  ä½¿ç”¨è¯¥å‘½ä»¤è¿›è¡Œæ–‡æœ¬é€‰æ‹©.
#       shift v  è¿›è¡Œæ•´è¡Œé€‰æ‹©.
#        ctrl v  è¿›è¡ŒçŸ©å½¢é€‰æ‹©, æŒ‰å®Œ ctrl v å, éœ€è¦å†é€šè¿‡ v è¿›è¡Œé€‰æ‹©.
#           esc  é€€å‡ºå½“å‰é€‰æ‹©çš„æ–‡æœ¬, è¿™æ ·å°±å¯ä»¥é‡æ–°ä½¿ç”¨ v è¿›è¡Œé€‰æ‹©äº†.
#             y  å°†é€‰æ‹©çš„æ–‡æœ¬å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿.
#     command v  å°†æ‹·è´çš„æ–‡æœ¬è¿›è¡Œç²˜è´´.
#
#   **** sync æ¨¡å¼ ****
#        ctrl y  æ‰“å¼€æˆ–å…³é—­ sync æ¨¡å¼.
#
#   **** æ’ä»¶èƒ½åŠ› ****
#             I  å®‰è£…æ–°æ·»åŠ çš„æ’ä»¶.
#             U  æ›´æ–°æ’ä»¶.
#             u  å¸è½½ä¸åœ¨é…ç½®æ–‡ä»¶ä¸­çš„æ’ä»¶.
#        ctrl s  ä¿å­˜å½“å‰çš„æ‰€æœ‰ session.
#        ctrl r  ç”±äºæœåŠ¡å™¨é‡å¯æˆ– tmux kill-server ç­‰åŸå› å¯¼è‡´ä¸¢å¤± session å,
#                å¯ä»¥ä½¿ç”¨æ­¤å‘½ä»¤æ¢å¤ session.
#        ctrl f  è¿›å…¥ copy æ¨¡å¼, å…‰æ ‡è·³è½¬åˆ°å‘½ä»¤è¡Œä¸Šæ–¹çš„æ–‡ä»¶åç§°å¹¶é«˜äº®æ˜¾ç¤ºé€‰ä¸­æ–‡ä»¶å.
#        ctrl g  è¿›å…¥ copy æ¨¡å¼, ç”¨äº git status -sb å‘½ä»¤å,
#                é€‰ä¸­åˆ—å‡ºçš„ä¸€ä¸ªæ–‡ä»¶åç§°å¹¶é«˜äº®æ˜¾ç¤º.
#        ctrl u  è¿›å…¥ copy æ¨¡å¼, å…‰æ ‡è·³è½¬åˆ°å‘½ä»¤è¡Œä¸Šæ–¹çš„ url é“¾æ¥å¹¶é«˜äº®æ˜¾ç¤º.
#        ctrl d  è¿›å…¥ copy æ¨¡å¼, å…‰æ ‡è·³è½¬åˆ°å‘½ä»¤è¡Œä¸Šæ–¹çš„æ•°å­—å¹¶é«˜äº®æ˜¾ç¤º.
#             D  è¿›å…¥ copy æ¨¡å¼, é«˜äº®é€‰ä¸­æ¯è¡Œå¼€å¤´çš„æ•°å­—å­—ç¬¦ä¸²,
#                ä¸€èˆ¬ç”¨äº pgrep -lf processname å‘½ä»¤å, ç”¨æ¥å¿«é€Ÿé€‰æ‹©å¤åˆ¶ PID.
#             S  è¿›å…¥ copy æ¨¡å¼, é«˜äº®é€‰ä¸­ "" åŒ…è£¹çš„å­—ç¬¦ä¸².
#        ctrl i  è¿›å…¥ copy æ¨¡å¼, é€‰ä¸­å‘½ä»¤è¡Œä¸Šæ–¹çš„ IP åœ°å€, å¹¶é«˜äº®æ˜¾ç¤º.
#        ctrl h  è¿›å…¥ copy æ¨¡å¼, é€‰ä¸­å¹¶é«˜äº®æ˜¾ç¤º sha1 å­—ç¬¦ä¸²,
#                ä¸€èˆ¬ç”¨äº git log | head -20 å‘½ä»¤å.
#             q  é€€å‡º copy æ¨¡å¼.
#             /  è¿›å…¥å­—ç¬¦ä¸²æˆ–æ­£åˆ™æœç´¢æ¨¡å¼, æœç´¢å‘½ä»¤è¡Œä¸Šæ–¹çš„æ–‡æœ¬å¹¶é«˜äº®æ˜¾ç¤º;
#                è¿™é‡Œæœ‰ä¸ªæŠ€å·§å¯ä»¥å¤§é¢ç§¯å¤åˆ¶å±å¹•ä¸Šçš„æ–‡æœ¬å†…å®¹:
#                   è¾“å…¥è¦å¤åˆ¶çš„æ–‡æœ¬çš„å¼€å¤´çš„å…³é”®å­—, å›è½¦å, å…‰æ ‡å°†å®šä½åˆ°ä½ è¾“å…¥çš„å…³é”®å­—,
#                   ç„¶åä¸€ç›´æŒ‰ l é”®æ‰©å¤§ä½ è¦å¤åˆ¶çš„æ–‡æœ¬èŒƒå›´,
#                   ç„¶åæŒ‰ y å³å¯å°†å†…å®¹æ‹·è´åˆ°ç³»ç»Ÿå‰ªè´´æ¿.
#           n/N  å‘ä¸Š/å‘ä¸‹æœç´¢æ–‡æœ¬.
#         enter  å¤åˆ¶é€‰ä¸­çš„æ–‡æœ¬.
#             y  normal æ¨¡å¼ä¸‹, å°†å‘½ä»¤è¡Œæ–‡æœ¬å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿;
#                copy æ¨¡å¼ä¸‹, å°†é€šè¿‡ n/N é€‰æ‹©çš„é«˜äº®æ–‡æœ¬æ‹·è´åˆ°ç³»ç»Ÿå‰ªè´´æ¿.
#             Y  normal æ¨¡å¼ä¸‹, å°†çª—æ ¼çš„å½“å‰å·¥ä½œç›®å½•æ–‡æœ¬æ‹·è´åˆ°ç³»ç»Ÿå‰ªè´´æ¿;
#                copy æ¨¡å¼ä¸‹, å°†é€šè¿‡ n/N é€‰æ‹©çš„é«˜äº®æ–‡æœ¬ç›´æ¥å¤åˆ¶å¹¶ç²˜è´´åˆ°å‘½ä»¤è¡Œ.
#             o  copy æ¨¡å¼ä¸‹, ç›´æ¥ä½¿ç”¨ç›¸åº”çš„é»˜è®¤åº”ç”¨æ‰“å¼€é€‰ä¸­çš„æ–‡ä»¶æˆ–url.
#             S  copy æ¨¡å¼ä¸‹, ä½¿ç”¨ google æœç´¢é€‰ä¸­çš„å­—ç¬¦ä¸²,
#                æ³¨æ„å¯ä½¿ç”¨ l æˆ– h å‘å³æˆ–å‘å·¦æ‰©å±•é€‰ä¸­çš„å­—ç¬¦ä¸².
#             B  copy æ¨¡å¼ä¸‹, ä½¿ç”¨ bing æœç´¢é€‰ä¸­çš„å­—ç¬¦ä¸².
#
#   **** æ³¨æ„äº‹é¡¹ ****
#
#    1) æœ‰äº›æƒ…å†µä¸‹, ä¸ç®¡æ€ä¹ˆä¿®æ”¹é…ç½®æ–‡ä»¶, éƒ½æ— æ³•ä½¿é…ç½®ç”Ÿæ•ˆ, è§£å†³æ–¹æ³•:
#       tmux kill-server
#
#    2) å³ä½¿é€šè¿‡ tmux kill-server æ–¹å¼, éƒ¨åˆ†é…ç½®ä»ç„¶ä¸ç”Ÿæ•ˆ,
#       æ¯”å¦‚è‡ªåŠ¨æ¢å¤ä¿å­˜çš„ sessions åŠŸèƒ½, è§£å†³åŠæ³•:
#       ps axu|grep -v grep|grep tmux|awk '{print $2}'|xargs kill -9

# }}
